<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Retirement Calculator – Advanced Planning</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#f6f9fc;
  --card:#ffffff;
  --primary:#1f6fb6;
  --text:#1c1f21;
  --muted:#6b7280;
  --border:#e5e7eb;
  --radius:12px;
  --shadow:0 10px 30px rgba(0,0,0,.06);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,Arial;
  background:var(--bg);
  color:var(--text);
}
.container{
  max-width:1200px;
  margin:auto;
  padding:16px;
}
h1{text-align:center;color:var(--primary)}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}
.card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
}
label{display:block;margin-top:12px;font-size:14px}
input,select{
  width:100%;
  padding:10px;
  margin-top:4px;
  border:1px solid var(--border);
  border-radius:8px;
}
button{
  margin-top:16px;
  width:100%;
  padding:14px;
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:10px;
  font-size:16px;
}
.big{font-size:22px;font-weight:700;color:var(--primary)}
canvas{margin-top:24px}
@media(max-width:900px){.grid{grid-template-columns:1fr}}
</style>
</head>

<body>
<div class="container">
<h1>Advanced Retirement Calculator</h1>

<div class="grid">

<!-- INPUT -->
<div class="card">
<label>Current Age</label>
<input id="age" value="30">

<label>Retirement Age</label>
<input id="retire" value="60">

<label>Life Expectancy</label>
<input id="life" value="85">

<label>Current Savings</label>
<input id="savings" value="20000">

<label>Monthly Contribution</label>
<input id="monthly" value="500">

<label>Annual Return (%)</label>
<input id="rate" value="7">

<label>Inflation (%)</label>
<input id="inflation" value="3">

<label>Monthly Expenses After Retirement</label>
<input id="expense" value="2000">

<label>Currency</label>
<select id="currency">
  <option value="$">$ USD</option>
  <option value="€">€ EUR</option>
  <option value="₹">₹ INR</option>
</select>

<button onclick="calculate()">Calculate</button>
</div>

<!-- OUTPUT -->
<div class="card">
<div>Total Savings at Retirement</div>
<div class="big" id="total">—</div>

<div style="margin-top:10px">Funds Will Last</div>
<div class="big" id="lasting">—</div>

<canvas id="growth"></canvas>
<canvas id="retirement"></canvas>
<canvas id="pie"></canvas>
</div>

</div>
</div>

<script>
let c1,c2,c3;

function money(x){
  return document.getElementById("currency").value +
    Number(x).toLocaleString(undefined,{maximumFractionDigits:0});
}

function calculate(){
  const age=+ageEl.value;
  const retire=+retireEl.value;
  const life=+lifeEl.value;
  let bal=+saveEl.value;
  const monthly=+monEl.value*12;
  const r=+rateEl.value/100;
  const inf=+infEl.value/100;
  const exp=+expEl.value*12;

  const real=(1+r)/(1+inf)-1;

  let grow=[],labels=[],contri=0,interest=0;

  for(let i=age;i<retire;i++){
    let before=bal;
    bal=bal*(1+r)+monthly;
    interest+=bal-before-monthly;
    contri+=monthly;
    grow.push(bal);
    labels.push("Age "+(i+1));
  }

  totalEl.innerHTML=money(bal);

  let retireBal=[],rLabels=[],years=0;
  let temp=bal;
  for(let i=retire;i<life;i++){
    temp=temp*(1+real)-exp;
    if(temp<=0) break;
    retireBal.push(temp);
    rLabels.push("Age "+(i+1));
    years++;
  }

  lastingEl.innerHTML=years+" years";

  if(c1) c1.destroy();
  if(c2) c2.destroy();
  if(c3) c3.destroy();

  c1=new Chart(growth,{
    type:"line",
    data:{labels,datasets:[{label:"Savings Growth",data:grow,borderWidth:2}]}
  });

  c2=new Chart(retirement,{
    type:"line",
    data:{labels:rLabels,datasets:[{label:"Balance After Retirement",data:retireBal,borderWidth:2}]}
  });

  c3=new Chart(pie,{
    type:"pie",
    data:{
      labels:["Contributions","Interest"],
      datasets:[{data:[contri,interest]}]
    }
  });
}

const ageEl=age,retireEl=retire,lifeEl=life,
saveEl=savings,monEl=monthly,rateEl=rate,
infEl=inflation,expEl=expense,
totalEl=total,lastingEl=lasting;
</script>
</body>
</html>
